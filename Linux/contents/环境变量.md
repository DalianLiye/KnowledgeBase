[目录](../目录.md)

# 关于环境变量 #
程序运行时会接收一组环境变量\
环境变量是未在当前进程中定义，而从父进程中继承而来的变量\
可以在脚本或程序中使用特定的环境变量\
设置了环境变量后，从当前shell脚本执行的任何程序都会继承这个变量

全局变量只在当前执行的Shell进程中有效，对其它Shell进程和子进程都无效\
在其他进程和所有子进程中也有效的变量，称为"环境变量"\

# 设置环境变量 #
环境变量通过export命令导出
```bash
export var=value #方式1

var=value; #方式2
export var;
```

# 环境变量作用范围 #
创建环境变量的Shell的进程称为父进程\
如果在父进程中再创建一个新的进程(比如调用一个子shell)，则该新的shell进程被称作Shell子进程\
Shell子进程会继承父进程的环境变量为自己所用\
因此，环境变量可从父进程传给子进程，也可以传递给孙进程，即所有后代进程\

**注**
- 两个没有父子关系的Shell进程是不能传递环境变量的，并且环境变量只能向下传递而不能向上传递，即"传子不传父"
- 环境变量也是临时的\
  通过export导出的环境变量只对当前Shell进程以及所有的子进程有效\
  如果最顶层的父进程被关闭，则环境变量也随之消失了，其它的进程也就无法使用了, 所以环境变量也是临时的\


# 常用环境变量相关命令 #
- 查看所有与此终端进程相关环境变量
```bash
env
```

- 查看当前进程运行时的环境变量
```bash
#$PID为相关进程ID
cat /proc/$PID/environ 

#由于返回的结果中，各个变量与赋值对之间用\0分隔，因此可以将\0替换为\n
#使用tr命令将\0替换成\n
cat /proc/$PID/environ | tr  '\0’ '\n'
```



# 常用环境变量 #

- **$?**\
上一命令执行的结果，若正常结束，则输出0 \
如果命令是调用函数，且函数里显示的return了值，则返回该return值, 否则返回该函数最后一个命令的执行结果


- **$PATH**\
PATH中的各个目录用冒号分隔\
执行命令时，shell自动在PATH所包含的目录列表中查找对应的可执行文件\
通常定义在以下路径: 
- /etc/environment
- /etc/profile
- ~/.bashrc


- **$HOME**\
当前系统的home路径


- **$PWD**\
当前路径，可以用"."					


- **$USER**\
当前登录用户					


- **$UID**\
- 检查当前用户是否为超级用户，root用户的UID是0					
										
- **$SHELL**\
当前的shell版本，也可以用echo $0					


- **$_DEBUG**\
设置执行脚本是否启动debug模式，on/off					
										
- **$RANDOM**\
返回一个随机数					


- **$$**\
当前运行脚本的进程ID \
可以用来生成临时文件，如/tmp/var.$$	

- **IFS**\
内部字段分隔符 \
IFS是存储定界符的环境变量，是当前shell环境使用的默认定界字符串 \
IFS的默认值为空白字符，包括换行符，tab和空格 \
当IFS被设定为逗号时，则for循环会以逗号为分隔符 \
```bash
#!/bash/bin										
data="name,sex,rollno,location"
oldIFS=$IFS
IFS=,
for item in $data;									
	do
		echo Item:$item
	done
IFS=$oldIFS

#结果：Item：name		
#      Item：sex		
#      Item：rollno		
#      Item：location		
```
